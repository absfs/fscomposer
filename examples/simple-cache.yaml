version: "1.0"
name: "simple-cache"
description: "Simple cached filesystem for POC testing"

nodes:
  # Backend storage (local disk)
  - id: backend
    type: osfs
    config:
      root: /tmp/fscomposer-test

  # Add caching layer
  - id: cache
    type: cachefs
    config:
      maxBytes: 1048576  # 1MB cache
      policy: LRU
      metadataCache: true

  # Add metrics
  - id: metrics
    type: metricsfs
    config:
      enablePrometheus: false

connections:
  - from: backend
    to: cache
  - from: cache
    to: metrics

mount:
  type: fuse
  path: /mnt/cached
  root: metrics
  options:
    allowOther: true
